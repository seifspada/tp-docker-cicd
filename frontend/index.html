<script>
const BACKEND_URL = 'https://tp-backend-docker-cicd.onrender.com';

async function fetchData() {
  try {
    // Fetch API status
    const apiResponse = await fetch(`${BACKEND_URL}/api`);
    if (!apiResponse.ok) throw new Error('API request failed');
    const apiData = await apiResponse.json();
    document.getElementById('api-response').innerText = JSON.stringify(apiData, null, 2);

    // Fetch database data
    const dbResponse = await fetch(`${BACKEND_URL}/db`);
    if (!dbResponse.ok) throw new Error('Database request failed');
    const dbData = await dbResponse.json();
    document.getElementById('db-response').innerText = JSON.stringify(dbData, null, 2);

  } catch (error) {
    document.getElementById('api-response').innerText = `Error: ${error.message}`;
    document.getElementById('db-response').innerText = `Error: ${error.message}`;
  }
}

// Met Ã  jour toutes les secondes
setTimeout(fetchData, 1000);
</script>

